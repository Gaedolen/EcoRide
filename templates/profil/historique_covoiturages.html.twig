{% extends 'base.html.twig' %}

{% block head %}
    <link rel="stylesheet" href="{{ asset('/css/profil/historique_covoiturages.css') }}">
{% endblock %}

{% block body %}
    <h1 class='titre'>üìú Historique de mes covoiturages</h1>

    {% if covoiturages is not empty %}
        <div class="covoiturage-container-vertical">
            {% set previousMonth = null %}

            {% set moisFR = {
                '01': 'Janvier',
                '02': 'F√©vrier',
                '03': 'Mars',
                '04': 'Avril',
                '05': 'Mai',
                '06': 'Juin',
                '07': 'Juillet',
                '08': 'Ao√ªt',
                '09': 'Septembre',
                '10': 'Octobre',
                '11': 'Novembre',
                '12': 'D√©cembre'
            } %}

            {% for covoiturage in covoiturages %}
                {% set monthNumber = covoiturage.date_depart|date('m') %}
                {% set year = covoiturage.date_depart|date('Y') %}
                {% set currentMonth = monthNumber ~ '-' ~ year %}

                {% if currentMonth != previousMonth %}
                    <h2 class="month-title">
                        <span class="month-dot"></span>
                        {{ moisFR[monthNumber] }} {{ year }}
                    </h2>
                    {% set previousMonth = currentMonth %}
                {% endif %}

                <div class="covoiturage-card">
                    <div class="covoiturage-content">
                        <div class="covoiturage-left">
                            <h3 class="titre-covoiturage">Trajet vers {{ covoiturage.lieu_arrivee }}</h3>
                            <p><strong>D√©part :</strong> {{ covoiturage.lieu_depart }}, {{ covoiturage.date_depart|date('d/m/Y') }} √† {{ covoiturage.heure_depart|date('H:i') }}</p>
                            <p><strong>Arriv√©e :</strong> {{ covoiturage.lieu_arrivee }}, {{ covoiturage.date_arrivee|date('d/m/Y') }} √† {{ covoiturage.heure_arrivee|date('H:i') }}</p>
                            <p><strong>Nombre de places :</strong> {{ covoiturage.nb_place }}</p>
                            <p><strong>Prix par personne :</strong> {{ covoiturage.prix_personne }} ‚Ç¨</p>
                        </div>

                        <div class="separator-vertical"></div>
                        <div class="covoiturage-right">
                            <h3 class="titre-covoiturage">Ma voiture</h3>
                            {% if covoiturage.marque is not empty %}
                                <p><strong>Marque : </strong> {{ covoiturage.marque }}</p>
                                <p><strong>Mod√®le : </strong> {{ covoiturage.modele }}</p>
                                <p><strong>Immatriculation : </strong> {{ covoiturage.immatriculation }}</p>
                                <p><strong>Energie : </strong> {{ covoiturage.energie }}</p>
                                <p><strong>Couleur : </strong> {{ covoiturage.couleur }}</p>
                            {% else %}
                                <p><em>La voiture a √©t√© supprim√©e</em></p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Vous n'avez aucun covoiturage pass√©.</p>
    {% endif %}

{% endblock %}
