{% extends 'base.html.twig' %}

{% block title %}Détails du covoiturage{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ asset('/css/detailsCovoiturage.css') }}">
{% endblock %}

{% block body %}
<div class="details-container">
    <div class="details-card">
        <div class="left-column">
            <div class="chauffeur-section">
                <img src="{{ trajet.chauffeur_photo ? 'data:image/jpeg;base64,' ~ trajet.chauffeur_photo : asset('images/default-user.png') }}" class="chauffeur-photo" alt="Photo">
                <p class="chauffeur-name">{{ trajet.chauffeur_pseudo }}</p>
                <p>Note : {{ trajet.chauffeur_note ?? 'Non noté' }}/5</p>
            </div>

            <div class="trajet-section">
                <h2>Trajet</h2>
                <p><strong>Départ :</strong> {{ trajet.lieu_depart }} - {{ trajet.date_depart|date('d/m/Y') }} à {{ trajet.heure_depart|date('H:i') }}</p>
                <p><strong>Arrivée :</strong> {{ trajet.lieu_arrivee }} - {{ trajet.date_arrivee|date('d/m/Y') }} à {{ trajet.heure_arrivee|date('H:i') }}</p>

                {% set duree = trajet.heure_arrivee.timestamp - trajet.heure_depart.timestamp %}
                {% set h = duree // 3600 %}
                {% set m = (duree % 3600) // 60 %}
                <p><strong>Durée :</strong> {{ h }}h{% if m > 0 %}{{ m }}min{% endif %}</p>

                <p><strong>Prix :</strong> {{ trajet.prix_personne }} €</p>
                <p><strong>Statut :</strong> {{ trajet.statut|capitalize }}</p>
            </div>
        </div>

        <div class="separator-vertical"></div>

        <div class="right-column">
            <div class="voiture-section">
                <h3>Véhicule</h3>
                <p><strong>Marque :</strong> {{ trajet.marque }}</p>
                <p><strong>Modèle :</strong> {{ trajet.modele }}</p>
                <p><strong>Énergie :</strong> {{ trajet.energie }}</p>
                <p><strong>Couleur :</strong> {{ trajet.couleur }}</p>
                <p><strong>Places :</strong> {{ trajet.nb_place }}</p>
                <p><strong>Animaux :</strong> {{ trajet.animaux ? 'Oui' : 'Non' }}</p>
                <p><strong>Fumeur :</strong> {{ trajet.fumeur ? 'Oui' : 'Non' }}</p>
            </div>

            <a href="#" class="btn-reserver">Réserver ce trajet</a>
        </div>
    </div>
</div>
{% endblock %}
