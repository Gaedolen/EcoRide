{% extends 'base.html.twig' %}

{% block title %}Mod√©ration des avis{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ asset('/css/employe/moderation_avis.css') }}">
{% endblock %}

{% block body %}
<div class="avis-container">
    <h2>üìù Mod√©ration des avis</h2>

    {% if avis is empty %}
        <p class="empty">Aucun avis en attente de mod√©ration.</p>
    {% else %}
        {% for a in avis %}
            <div class="avis-item">
                <div class="avis-header">
                    <h4>{{ a.auteur.pseudo }} ‚û°Ô∏è {{ a.cible.pseudo }}</h4>
                    <small>{{ a.date|date('d/m/Y H:i') }}</small>
                </div>
                <div class="avis-content">
                    <strong>Note :</strong> {{ a.note }}/5<br>
                    <strong>Commentaire :</strong> {{ a.commentaire }}
                </div>

                <form method="post" action="{{ path('employe_moderer_avis_action', {id: a.id}) }}">
                    <input type="hidden" name="_token" value="{{ csrf_token('moderation_avis_' ~ a.id) }}">
                    <div class="moderation-actions">
                        <button type="submit" name="action" value="approuve" class="approve">‚úÖ Approuver</button>
                        <button type="submit" name="action" value="refuse" class="refuse">‚ùå Refuser</button>
                    </div>
                </form>
            </div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}
